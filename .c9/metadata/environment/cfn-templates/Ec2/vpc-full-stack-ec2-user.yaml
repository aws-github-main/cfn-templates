{"changed":true,"filter":false,"title":"vpc-full-stack-ec2-user.yaml","tooltip":"/cfn-templates/Ec2/vpc-full-stack-ec2-user.yaml","value":"#Author: Birju\n# template to create user defined vpc.\nMappings:\n  RegionMap:\n    us-east-1:\n      AMI: ami-1853ac65\n    us-west-1:\n      AMI: ami-bf5540df\n    eu-west-1:\n      AMI: ami-3bfab942\n    ap-southeast-1:\n      AMI: ami-e2adf99e\n    ap-southeast-2:\n      AMI: ami-43874721\nMetadata:\n  AWS::CloudFormation::Interface:\n    ParameterGroups:\n      - Label:\n          default: VPC Name\n        Parameters:\n          - VpcName\n      - Label:\n          default: VPC Availability Zones\n        Parameters:\n          - AvailabilityZone1\n          - AvailabilityZone2\n      - Label:\n          default: Define Cidr Blocks\n        Parameters:\n          - VpcCidrBlock\n          - PublicSubnet1Cidr\n          - PublicSubnet2Cidr\n          - PrivateSubnet1Cidr\n          - PrivateSubnet2Cidr\nParameters:\n  VpcName:\n    Type: String\n    Description: Enter VPC Name\n  AvailabilityZone1:\n    Type: AWS::EC2::AvailabilityZone::Name\n    Description: Availability Zone 1\n  AvailabilityZone2:\n    Type: AWS::EC2::AvailabilityZone::Name\n    Description: Availability Zone 2\n  VpcCidrBlock:\n    Type: String\n    Description: VPC CIDR Blocks\n    Default: \"10.0.0.0/16\"\n  PublicSubnet1Cidr:\n    Type: String\n    Description: Public Subnet 1 CIDR\n    Default: \"10.0.1.0/24\"\n  PublicSubnet2Cidr:\n    Type: String\n    Description: Public Subnet 2 CIDR\n    Default: \"10.0.2.0/24\"\n  PrivateSubnet1Cidr: \n    Type: String\n    Description: Private Subnet 1 CIDR\n    Default: \"10.0.11.0/24\"\n  PrivateSubnet2Cidr:\n    Type: String\n    Description: Private Subnet 2 CIDR    \n    Default: \"10.0.12.0/24\"\nResources:\n  DefaultVPC:\n    Type: AWS::EC2::VPC\n    Properties:\n      CidrBlock: !Ref VpcCidrBlock\n      EnableDnsSupport: true\n      EnableDnsHostnames: true\n      InstanceTenancy: default\n      Tags:\n        - Key: Name\n          Value: !Ref VpcName\n  PublicSubnet1:\n    Type: AWS::EC2::Subnet\n    Properties:\n      VpcId: !Ref DefaultVPC\n      CidrBlock: !Ref PublicSubnet1Cidr\n      AvailabilityZone: !Ref AvailabilityZone1\n      Tags:\n        - Key: Name\n          Value: !Join \n             - \"\"\n             - - \"Public Subnet 1\"\n               - \"\"\n  PublicSubnet2:\n    Type: AWS::EC2::Subnet\n    Properties:\n      VpcId: !Ref DefaultVPC\n      CidrBlock: !Ref PublicSubnet2Cidr\n      AvailabilityZone: !Ref AvailabilityZone2\n      Tags:\n        - Key: Name\n          Value: !Join \n            - \"\"\n            - - \"Public Subnet 2\"\n              - !Ref AvailabilityZone2  \n  PrivateSubnet1:\n    Type: AWS::EC2::Subnet\n    Properties:\n      VpcId: !Ref DefaultVPC\n      CidrBlock: !Ref PrivateSubnet1Cidr\n      AvailabilityZone: !Ref AvailabilityZone1\n      Tags:\n        - Key: Name\n          Value: !Join \n            - \"\"\n            - - \"Private Subnet 1\"\n              - !Ref AvailabilityZone1\n  PrivateSubnet2:\n    Type: AWS::EC2::Subnet\n    Properties:\n      VpcId: !Ref DefaultVPC\n      CidrBlock: !Ref PrivateSubnet2Cidr\n      AvailabilityZone: !Ref AvailabilityZone2\n      Tags:\n        - Key: Name\n          Value: !Join \n            - \"\"\n            - - \"Private Subnet 2\"\n              - !Ref AvailabilityZone2\n  Ec2Instance:\n    Type: AWS::EC2::Instance\n    Properties:\n      InstanceType: t2.micro\n      ImageId: !FindInMap\n        - RegionMap\n        - !Ref AWS::Region\n        - AMI\n      Tags:\n        - Key: Name\n          Value: !Join\n            - \"\"\n            - - \"ec2 -\"\n              - !Ref AWS::StackName\n      SecurityGroupIds:\n        - !GetAtt SecurityGroup.GroupId\n      SubnetId: !Ref PublicSubnet1  \n  SecurityGroup:\n    Type: AWS::EC2::SecurityGroup\n    Properties:\n      GroupDescription: \"EC2 Security Group created by stack\"\n      GroupName: ec2-security-group-cfn\n      SecurityGroupIngress:\n        - IpProtocol: tcp\n          FromPort: 22\n          ToPort: 22\n          CidrIp: 0.0.0.0/0\n      Tags:\n        - Key: Name\n          Value: \"ec2-sg\"\n      VpcId: !Ref DefaultVPC","undoManager":{"mark":0,"position":-1,"stack":[[{"start":{"row":57,"column":16},"end":{"row":58,"column":0},"action":"insert","lines":["",""],"id":2},{"start":{"row":58,"column":0},"end":{"row":58,"column":4},"action":"insert","lines":["    "]},{"start":{"row":58,"column":4},"end":{"row":59,"column":0},"action":"insert","lines":["",""]},{"start":{"row":59,"column":0},"end":{"row":59,"column":4},"action":"insert","lines":["    "]}]]},"ace":{"folds":[],"scrolltop":540,"scrollleft":0,"selection":{"start":{"row":146,"column":18},"end":{"row":146,"column":18},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1575147090183}